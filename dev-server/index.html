<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Bioz Packaged Content Hub Test</title>
    <link rel="stylesheet" media="screen" href="https://cdn.bioz.com/assets/font-awesome-reg.css">
    <link rel="stylesheet" media="screen" href="https://cdn.bioz.com/assets/jquery-ui-1.12.0.css">
    <link rel="stylesheet" media="screen" href="https://cdn.bioz.com/assets/bootstrap-3.3.6.css">
    <script src="https://cdn.bioz.com/assets/bootstrap-3.3.6.js"></script>
    <script src="bioz_sino_if_banner_widget.js"></script>
</head>
<body style="font-family: Roboto, Helvetica, Arial, sans-serif;cursor: auto;margin:0">
<h1 style="text-align: center">Bioz <span id="vendor-name"></span> IF Banner Test</h1>
<div style="padding:10px">
    <div id="bioz-if-banner-widget" class="bioz-if-banner-widget"></div>
</div>
<br/>
<br/>
<script>
    var _form_mobile = false;
    var _locale = "en";
    var param_locale = getUrlVars()["lang"];
    if (param_locale && param_locale.length > 0) {
        _locale = param_locale;
    }
    var _vendor_id = "1065";
    var _vendor_partner_color = "#428672";
    var _vendor_name = "Sino Biological";
    var v_widget_noiframe_obj = null;
    var ci_widget_noiframe_obj = null;
    var _start_time = new Date();
    var _badge_div = "<div class=\"bioz-w-container\" style=\"position:relative\">" +
            "   <div id=\"w-" + _vendor_id + "-qz\"></div>" +
            "   <div style=\"height:10px\"></div>" +
            "   <div id=\"w-1065-ci\"></div>" +
            "   <div id=\"bioz-w-bottom-logo\" style=\"position: absolute;right: 0;width:70px\"></div>" +
            "</div>";

    document.addEventListener('DOMContentLoaded', init);

    function init() {
        document.getElementById("bioz-if-banner-widget").innerHTML = _badge_div;
        document.getElementById("vendor-name").innerHTML = _vendor_name;
        v_widget_noiframe_obj = new Bioz_sino_if_banner_Widget.v_widget_noiframe_obj();
        v_widget_noiframe_obj.request_widget_data_internal();
        ci_widget_noiframe_obj = new Bioz_sino_if_banner_Widget.ci_widget_noiframe_obj();
        ci_widget_noiframe_obj.request_widget_data();
        window.addEventListener('beforeunload', ()=>{
            measure_duration();
        });
    }
    function measure_duration() {
        if (typeof (_v_widget) != 'undefined') {
            console.log("**** performing visibility measurement ****");
            v_widget_noiframe_obj.endVisibleTime(_start_time);
        } else {
            console.log("**** failed visibility measurement event ****");
        }
    }
    function getUrlVars() {
        var vars = {};
        var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&#]*)/gi, function(m,key,value) {
            vars[key] = value;
        });
        return vars;
    }
</script>
</body>
</html>
